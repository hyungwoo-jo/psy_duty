# ILP 스케줄러 규칙

이 문서는 ILP 스케줄러가 사용하는 규칙의 목록입니다. 규칙은 크게 두 종류로 나뉩니다.

- **절대 규칙 (Hard Constraints):** 스케줄이 반드시 만족해야 하는 핵심 규칙입니다.
- **균형 규칙 (Balancing Rules):** 근무의 공평성을 위한 규칙으로, 일부는 UI를 통해 켜고 끌 수 있습니다.

---

### 1. 절대 규칙 (항상 적용)

*   **모든 슬롯 채우기:** 모든 날짜의 모든 당직 슬롯(병당, 응당)은 반드시 한 명에게 배정됩니다.
*   **하루에 한 번만 당직:** 한 근무자는 하루에 최대 한 개의 당직만 설 수 있습니다.
*   **연차 자격:** 각 당직 슬롯은 요일에 따라 지정된 연차(R1-R4)만 설 수 있습니다.
*   **개인 일정 준수:** 근무자가 미리 지정한 휴가 또는 당직 불가일에는 당직을 배정하지 않습니다.
*   **R3 소아과 수요일 당직 금지:** 소아과 R3는 평일 수요일에 당직을 설 수 없습니다.
*   **Day-off 희망일 처리:** 근무자가 특정 날짜에 Day-off를 희망하면, 그 전날에 당직을 배정하도록 강제합니다.

---

### 2. 설정 가능한 규칙

*   **연속 당직 금지 (현재 적용 중):**
    *   **설명:** 한 근무자는 이틀 연속으로 당직을 설 수 없습니다.
    *   **설정 가능 여부:** 이 규칙을 켜고 끌 수 있도록 UI에 추가할 수 있습니다.

*   **R1 주간 당직 횟수 제한 (현재 조건부 적용 중):**
    *   **설명:** R1 근무자는 주당 2회를 초과하여 당직을 설 수 없습니다.
    *   **현재 로직:** 해당 주에 R1 휴가자가 없을 경우에만 이 규칙이 강제됩니다.
    *   **설정 가능 여부:** 이 규칙을 항상 강제하거나, 끄거나, 현재의 조건부 로직을 사용할지 UI에서 선택하게 할 수 있습니다.

*   **R3 주간 당직 횟수 제한 (현재 조건부 적용 중):**
    *   **설명:** R3 근무자는 주당 1회를 초과하여 당직을 설 수 없습니다.
    *   **현재 로직:** 해당 주에 R3 휴가자가 없을 경우에만 이 규칙이 강제됩니다.
    *   **설정 가능 여부:** 이 규칙도 R1과 마찬가지로 UI에서 제어할 수 있습니다.

*   **주간 최대 근무 시간 제한 (현재 비활성화됨):**
    *   **설명:** 한 근무자의 주간 총 근무 시간이 특정 상한(예: 72시간)을 넘지 않도록 제한합니다.
    *   **현재 상태:** 이 규칙은 계산 복잡도 문제로 현재 코드에서 **주석 처리되어 비활성화된 상태**입니다.
    *   **설정 가능 여부:** '제한 없음', '엄격(72시간)', '완화(80시간)' 등의 옵션을 두어 UI에서 제어할 수 있습니다.

---

### 3. 균형 규칙 (현재 항상 적용)

*   **역할별/통합 당직 횟수 균형:** 연차 내에서 개인별 총 당직 횟수가 최대한 공평하게 분배됩니다. (R3는 병당/응당 통합, 그 외는 역할별로 계산)
*   **Day-off 횟수 균형:** 연차 내에서 개인별 총 Day-off 횟수가 최대한 공평하게 분배됩니다.
