# 당직표 생성기 — 모델/규칙(샌드박스 기준)

## 시간 모델

- 평일 정규: 2명, 각 11h (07:00–18:00)
- 평일 당직: 기본 1명(옵션 2명), 각 13h (18:00–다음날 07:00)
- 주말/공휴일 당직: 2명, 각 24h (0–24h로 간주)
- 24h 근무일의 다음날: 24h 오프(정규/당직 모두 배제)
  - 평일에 정규+당직을 같이 한 사람(=그날 24h)만 다음날 오프
  - 평일에 당직만 한 경우(13h)는 다음날 오프 아님

## 배정 규칙

- 평일 구성: 정규 2명 선발 후, 당직 1명(옵션 2명) 배정 가능(같은 사람이 정규+당직 허용)
- 주말/공휴일: 정규 없음, 당직 2명(각 24h) 배정, 두 사람 모두 다음날 오프
- 불가일: 해당 인원은 그 날짜의 당직/정규 모두 배제
- 휴가: 입력한 날짜가 속한 주(선택한 주 모드 기준) 전체에서 해당 인원을 배제
- 개인 선호: any / weekday / weekend 제약을 위반하지 않도록 배정
- 주당 72h: 경고로 표시(하드 차단 아님)

## 주 계산 모드와 표시

- 주 계산 모드: 두 가지 중 선택 가능
  - 달력 기준(월–일)
  - 시작일 기준 7일 단위(예: 수–화)
- UI 달력: 항상 달력 주(월–일)로 그리되, 주별 시간 통계는 선택한 주 모드로 합산

## 입력 형식

- 근무자 목록: `이름, 선호옵션(any|weekday|weekend)` 줄바꿈 구분
- 공휴일: `YYYY-MM-DD` 한 줄에 한 개
- 개인 불가일: `이름: YYYY-MM-DD, YYYY-MM-DD ...`
- 휴가: `이름: YYYY-MM-DD, ...` (각 날짜가 속한 주 전체 제외)

## 출력/화면

- 요약: 기간, 미충원 경고, 공정성(총/당직 평균), 최적화 소요 ms
- 리포트: 인원별 총합/당직/평일·주말 횟수, 주별 시간 테이블
- 달력: 날짜별 당직 칩, 평일엔 `정규: A, B` 표시, 미충원 사유 툴팁
- 내보내기: JSON/CSV

## 최적화(샌드박스 기본)

- 강도: strong 고정(선택 UI 제거)
- 다중 재시작: 16회(best-of)
- 반복수: `iters = max(30,000, 120 × 일수)`
- 시간 예산: 기본 3000ms (주소창에 `?budget=1000~20000`으로 조절 가능)
- 목적함수: 
  - 1순위: 개인 총 근무시간 분산 최소화
  - 2순위: 개인 내부 주별 시간 분산 최소화(가중 0.5)

## 로컬 실행

- 정적 서버에서 동작(ESM)
- 예시: `python3 -m http.server 5174` → 브라우저 `http://localhost:5174`

## 비고

- 이 문서는 `feature/unavail-holiday-sandbox` 브랜치 기준입니다. Pages도 해당 브랜치를 대상으로 배포하면 설정과 동일하게 동작합니다.
