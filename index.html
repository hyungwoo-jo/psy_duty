<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>당직표 생성기 (초안)</title>
    <link rel="stylesheet" href="assets/styles.css" />
  </head>
  <body>
    <header>
      <h1>당직표 생성기 (초안)</h1>
      <p>규칙: 시작/종료일 범위 내 배치. 평일 정규근무 11h(2명), 평일 당직 기본 1명(옵션으로 2명 선택 가능, 각 +13h — 정규와 병행 시 24h), 주말/공휴일 당직 2명(각 24h). 당직 다음날 24h 오프. 주당 72h 초과 금지.</p>
    </header>

    <section class="controls">
      <div class="field">
        <label for="start-date">시작일</label>
        <input id="start-date" type="date" />
      </div>
      <div class="field">
        <label for="end-date">종료일</label>
        <input id="end-date" type="date" />
      </div>
      <div class="field">
        <label for="weeks">주 수(종료일 미지정 시)</label>
        <input id="weeks" type="number" min="1" max="8" value="4" />
      </div>
      <div class="field">
        <label for="week-mode">주 계산</label>
        <select id="week-mode">
          <option value="calendar" selected>달력 기준(월–일)</option>
          <option value="start">시작일 기준 7일 단위</option>
        </select>
      </div>
      <div class="field">
        <label for="weekday-slots">평일 당직 인원</label>
        <select id="weekday-slots">
          <option value="1" selected>1명</option>
          <option value="2">2명</option>
        </select>
      </div>
      <div class="field field--full">
        <label for="employees">근무자 목록 (이름, 선호옵션)</label>
        <textarea id="employees" rows="12" placeholder="형식 예시:
홍길동, any
김철수, weekday
이영희, weekend
박민수, any
최은지, weekday
정유진, weekend
권도윤, any
서지수, any
오세훈, weekday
장민준, weekend
한지우, any
노예린, weekday">홍길동, any
김철수, weekday
이영희, weekend
박민수, any
최은지, weekday
정유진, weekend
권도윤, any
서지수, any
오세훈, weekday
장민준, weekend
한지우, any
노예린, weekday</textarea>
      </div>
      <script>
        // 초기 기본 근무자: A, B, C, D
        window.addEventListener('DOMContentLoaded', () => {
          const el = document.querySelector('#employees');
          if (el) el.value = 'A, any\nB, any\nC, any\nD, any';
        });
      </script>
      <div class="field field--full">
        <label for="holidays">공휴일 지정 (YYYY-MM-DD, 한 줄에 한 개)</label>
        <textarea id="holidays" rows="4" placeholder="예시:
2025-01-01
2025-02-28"></textarea>
      </div>
      <div class="field field--full">
        <label for="unavailable">개인별 불가일 (이름: 날짜, 날짜...)</label>
        <textarea id="unavailable" rows="5" placeholder="예시:
홍길동: 2025-01-07, 2025-01-15
김철수: 2025-01-10 | 2025-01-11
이영희: 2025-01-04
"></textarea>
      </div>
      <div class="field field--full">
        <label for="vacations">휴가 (이름: 날짜, 날짜...) — 해당 날짜가 속한 주 전체 제외</label>
        <textarea id="vacations" rows="4" placeholder="예시:
홍길동: 2025-01-06  (이 주간 전체 휴가)
김철수: 2025-01-20, 2025-02-03"></textarea>
      </div>
      <div class="actions">
        <label style="display:flex;align-items:center;gap:6px">
          <span>최적화</span>
          <select id="opt-level">
            <option value="off">Off</option>
            <option value="fast">Fast</option>
            <option value="medium" selected>Medium</option>
            <option value="strong">Strong</option>
          </select>
        </label>
        <button id="generate">당직표 생성</button>
        <button id="export-json" disabled>JSON 내보내기</button>
        <button id="export-csv" disabled>CSV 내보내기</button>
      </div>
      <div id="messages" class="messages" aria-live="polite"></div>
    </section>

    <section>
      <div id="summary" class="summary"></div>
      <div id="report" class="report"></div>
      <div class="legend">선호옵션: any(제한 없음) · weekday(평일만) · weekend(주말/공휴일만)</div>
      <div id="calendar" class="calendar"></div>
    </section>

    <footer>
      <small>오픈소스 초안 — 정교화 필요 시 규칙/데이터 확장 가능</small>
    </footer>

    <script type="module" src="src/app.js"></script>
  </body>
  </html>
